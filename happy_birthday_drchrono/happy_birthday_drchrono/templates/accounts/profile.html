{% extends "base.html" %}
{% import "utils/forms.html" as forms %}

{% block title %}{{ request.user.username }}'s Profile{% endblock %}

{% block content %}
  <div class="row">
    <div class="large-12 columns">
      <h3>{{ request.user.username }}'s Notifications:</h3>
      <form id="HappyBirthdayForm" method="post" action="{{ request.path }}" class="notificationForm">
        <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
        <div class="card">
          <div class="card-divider">
            <div class="row">
              <div class="small-8 columns">
                <h4>Happy Birthday</h4>
              </div>
              <div class="small-4 columns text-right">
                {{ forms.switch(HappyBirthdayForm.is_active) }}
              </div>
            </div>
          </div>
          <div class="card-section">
            {{ forms.field(HappyBirthdayForm.notification_type) }}
            <div class="SMS">
              {{ forms.field(HappyBirthdayForm.sms) }}
            </div>
            <div class="email">
              {{ forms.field(HappyBirthdayForm.email_subject) }}
              {{ forms.field(HappyBirthdayForm.email_body) }}
            </div>
            <a data-dropdown="variable-dropdown" aria-controls="variable-dropdown" data-options="align:left" aria-expanded="false" class="right">Available variables</a>
            <div id="variable-dropdown" data-dropdown-content class="f-dropdown content" aria-autoclose="false" aria-hidden="true" tabindex="-1">
              <ul class="no-bullet">
                <li>$patients-first-name</li>
                <li>$patients-last-name</li>
                {# TODO: doctors name currently equates to the doctors ID. Change it to the doctors name #}
                <li>$doctors-name</li>
                <li>$patients-age</li>
                <hr/>
                <li>'\' before '$' ignores a variable</li>
              </ul>
            </div>
            <input type="hidden" name="next" value="{{ next }}"/>
            <div>
              <button type="submit" class="button">Save</button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
{% endblock %}
